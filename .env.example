# ============================================
# GitLab CE Docker Compose Configuration
# ============================================
# Copy file ini ke .env dan sesuaikan nilai-nilainya
# SEMUA KREDENSIAL DAN KONFIGURASI TERPUSAT DI SINI
#
# Cara penggunaan:
#   cp .env.example .env
#   nano .env  # Edit sesuai kebutuhan
# ============================================

# ============================================
# HOST & DOMAIN CONFIGURATION
# ============================================
# Ganti dengan domain Anda sendiri
GITLAB_HOSTNAME=gitlab.example.com
GITLAB_DOMAIN=gitlab.example.com
GITLAB_PROTOCOL=http
# Ganti ke https jika sudah setup SSL

# ============================================
# PORT MAPPING (External:Internal)
# ============================================
# Port eksternal yang akan diakses dari luar
GITLAB_HTTP_PORT=8880
GITLAB_HTTPS_PORT=8843
GITLAB_SSH_PORT=8822
GITLAB_SHELL_SSH_PORT=2222

# ============================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================
# GANTI dengan password yang kuat!
POSTGRES_USER=gitlab
POSTGRES_PASSWORD=CHANGE_THIS_POSTGRES_PASSWORD
POSTGRES_DB=gitlabhq_production

# ============================================
# REDIS CONFIGURATION
# ============================================
REDIS_MAX_MEMORY=512mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# ============================================
# GITLAB SETTINGS
# ============================================
GITLAB_TIMEZONE=Asia/Jakarta
# Password ini hanya digunakan saat instalasi pertama
# Setelah instalasi, ganti password via web UI
GITLAB_ROOT_PASSWORD=CHANGE_THIS_ROOT_PASSWORD
GITLAB_BACKUP_KEEP_TIME=604800
# 604800 = 7 hari

# ============================================
# SSL CONFIGURATION
# ============================================
GITLAB_SSL_ENABLE=false
GITLAB_SSL_CERTIFICATE=/etc/gitlab/ssl/gitlab.example.com.crt
GITLAB_SSL_CERTIFICATE_KEY=/etc/gitlab/ssl/gitlab.example.com.key

# ============================================
# PERFORMANCE TUNING
# ============================================
# Sesuaikan dengan resource server Anda
# Minimum: 2GB RAM, 2 CPU
# Recommended: 4GB+ RAM, 4+ CPU
PUMA_WORKER_PROCESSES=2
PUMA_WORKER_TIMEOUT=60
POSTGRESQL_SHARED_BUFFERS=256MB
POSTGRESQL_MAX_WORKER_PROCESSES=4

# ============================================
# DOCKER IMAGE VERSIONS
# ============================================
GITLAB_IMAGE_TAG=latest
POSTGRES_IMAGE_TAG=15-alpine
REDIS_IMAGE_TAG=7-alpine

# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_DRIVER=json-file
LOG_MAX_SIZE=50m
LOG_MAX_FILE=5

# ============================================
# EMAIL/SMTP CONFIGURATION (Optional)
# ============================================
# Enable untuk notifikasi email
GITLAB_SMTP_ENABLE=false
GITLAB_SMTP_HOST=smtp.example.com
GITLAB_SMTP_PORT=587
GITLAB_SMTP_USER=your_email@example.com
GITLAB_SMTP_PASSWORD=your_smtp_password
GITLAB_SMTP_DOMAIN=example.com
GITLAB_SMTP_AUTHENTICATION=login
GITLAB_SMTP_ENABLE_STARTTLS_AUTO=true

# ============================================
# HEALTH CHECK CONFIGURATION
# ============================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=5
HEALTH_CHECK_START_PERIOD=40s
